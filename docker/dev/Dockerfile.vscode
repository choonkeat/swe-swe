# Extend code-server image with custom CA certificates
FROM codercom/code-server:latest

# Switch to root to install certificates
USER root

# Copy custom CA certificates
COPY docker/ca-certificates/*.* /usr/local/share/ca-certificates/

# Install ca-certificates and update them
RUN apt-get update && \
    apt-get install -y ca-certificates && \
    update-ca-certificates && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Switch back to coder user
USER coder

WORKDIR /home/coder/project